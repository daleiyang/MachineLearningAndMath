<!DOCTYPE html>
<!-- saved from url=(0057)http://www.hankcs.com/nlp/averaged-perceptron-tagger.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="dns-prefetch" href="http://apps.bdimg.com/">
<meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-title" content="码农场">
<meta http-equiv="Cache-Control" content="no-siteapp">
<title>200行Python代码实现感知机词性标注器-码农场</title>
<link rel="dns-prefetch" href="http://apps.bdimg.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
		<script async="" src="./200行Python代码实现感知机词性标注器_files/analytics.js.下载"></script><script src="./200行Python代码实现感知机词性标注器_files/ca-pub-1152644711996772.js.下载"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.hankcs.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.5"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./200行Python代码实现感知机词性标注器_files/wp-emoji-release.min.js.下载" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="_bootstrap-css" href="./200行Python代码实现感知机词性标注器_files/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="_fontawesome-css" href="./200行Python代码实现感知机词性标注器_files/font-awesome.min.css" type="text/css" media="all">
<link rel="stylesheet" id="_main-css" href="./200行Python代码实现感知机词性标注器_files/main.css" type="text/css" media="all">
<script type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/jquery.min.js.下载"></script>
<link rel="https://api.w.org/" href="http://www.hankcs.com/wp-json/">
<link rel="prev" title="HanLP极致简繁转换" href="http://www.hankcs.com/nlp/simplified-traditional-chinese-conversion.html">
<link rel="next" title="基于结构化平均感知机的分词器Java实现" href="http://www.hankcs.com/nlp/segment/implementation-of-word-segmentation-device-java-based-on-structured-average-perceptron.html">
<link rel="canonical" href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html">
<link rel="shortlink" href="http://www.hankcs.com/?p=8152">
<link rel="alternate" type="application/json+oembed" href="http://www.hankcs.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.hankcs.com%2Fnlp%2Faveraged-perceptron-tagger.html">
<link rel="alternate" type="text/xml+oembed" href="http://www.hankcs.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.hankcs.com%2Fnlp%2Faveraged-perceptron-tagger.html&amp;format=xml">
<meta name="keywords" content="感知机, 维特比算法, 词性标注, 自然语言处理">
<meta name="description" content="译自Matthew的《A Good Part-of-Speech Tagger in about 200 Lines of Python》，本文用最精简的代码演示了如何写一个基于感知机的高性能词性标注器。以下是正文：自然语言处理的最新技术大部分都停留在学术界，但学术界往往非常谨慎、不愿意把话说满以免作茧自缚。但太谦虚也没有意义，本文就展示了如何写一个高性能的">
<link rel="icon" href="http://www.hankcs.com/wp-content/uploads/2017/04/cropped-Hankcs_512-32x32.png" sizes="32x32">
<link rel="icon" href="http://www.hankcs.com/wp-content/uploads/2017/04/cropped-Hankcs_512-192x192.png" sizes="192x192">
<link rel="apple-touch-icon-precomposed" href="http://www.hankcs.com/wp-content/uploads/2017/04/cropped-Hankcs_512-180x180.png">
<meta name="msapplication-TileImage" content="http://www.hankcs.com/wp-content/uploads/2017/04/cropped-Hankcs_512-270x270.png">
<link rel="shortcut icon" href="http://www.hankcs.com/favicon.ico">
<!--[if lt IE 9]><script src="http://www.hankcs.com/wp-content/themes/dux/js/libs/html5.min.js"></script><![endif]-->
<!--
	generated 14548 seconds ago
	generated in 0.215 seconds
	served from batcache in 0.003 seconds
	expires in 71852 seconds
-->
<script async="" data-requirecontext="_" data-requiremodule="main" src="./200行Python代码实现感知机词性标注器_files/main.js.下载"></script><script src="./200行Python代码实现感知机词性标注器_files/share.js.下载"></script><script async="" data-requirecontext="_" data-requiremodule="lazyload" src="./200行Python代码实现感知机词性标注器_files/lazyload.min.js.下载"></script><script async="" data-requirecontext="_" data-requiremodule="prettyprint" src="./200行Python代码实现感知机词性标注器_files/prettyprint.js.下载"></script><script async="" data-requirecontext="_" data-requiremodule="signpop" src="./200行Python代码实现感知机词性标注器_files/signpop.js.下载"></script><script async="" data-requirecontext="_" data-requiremodule="comment" src="./200行Python代码实现感知机词性标注器_files/comment.js.下载"></script><link href="./200行Python代码实现感知机词性标注器_files/share.css" rel="styleSheet" type="text/css"></head>
<body class="post-template-default single single-post postid-8152 single-format-standard comment-open site-layout-2">
<header class="header">
	<div class="container">
		<div class="logo"><a href="http://www.hankcs.com/" title="码农场-自然语言处理、机器学习算法"><img src="./200行Python代码实现感知机词性标注器_files/logo.png">码农场</a></div>		<a href="http://www.hankcs.com/" title="码农场-自然语言处理、机器学习算法" class="brand">放牧代码和思想
<br>专注自然语言处理、机器学习算法</a>		<ul class="site-nav site-navbar">
			<li id="menu-item-1834" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1834"><a href="http://www.hankcs.com/program/cpp/">C++</a></li>
<li id="menu-item-1835" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1835"><a href="http://www.hankcs.com/program/java/">Java</a></li>
<li id="menu-item-5754" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5754"><a href="http://www.hankcs.com/ml/">机器学习</a></li>
<li id="menu-item-2954" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-2954"><a href="http://www.hankcs.com/nlp/">NLP</a>
<ul class="sub-menu">
	<li id="menu-item-4344" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4344"><a href="http://www.hankcs.com/nlp/corpus/">语料库</a></li>
	<li id="menu-item-4342" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4342"><a href="http://www.hankcs.com/nlp/segment/">中文分词</a></li>
	<li id="menu-item-4343" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4343"><a href="http://www.hankcs.com/nlp/ner/">命名实体识别</a></li>
	<li id="menu-item-4479" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4479"><a href="http://www.hankcs.com/nlp/parsing/">句法分析</a></li>
</ul>
</li>
<li id="menu-item-1837" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1837"><a href="http://www.hankcs.com/program/algorithm/">算法</a></li>
<li id="menu-item-1839" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1839"><a href="http://www.hankcs.com/software/">软件</a></li>
<li id="menu-item-1838" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1838"><a href="http://www.hankcs.com/nihongonote/">日语</a>
<ul class="sub-menu">
	<li id="menu-item-1860" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1860"><a href="http://www.hankcs.com/nihongonote/riyurimen/">日语入门</a></li>
	<li id="menu-item-1861" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1861"><a href="http://www.hankcs.com/nihongonote/listening/">日语听力</a></li>
	<li id="menu-item-1863" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1863"><a href="http://www.hankcs.com/nihongonote/tekusuto/">日语综合教程</a>
	<ul class="sub-menu">
		<li id="menu-item-2190" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2190"><a href="http://www.hankcs.com/nihongonote/tekusuto/disance/">第三册</a></li>
		<li id="menu-item-2192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2192"><a href="http://www.hankcs.com/nihongonote/tekusuto/daiyonnsatu/">第四册</a></li>
		<li id="menu-item-2191" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2191"><a href="http://www.hankcs.com/nihongonote/tekusuto/5/">第五册</a></li>
		<li id="menu-item-2702" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2702"><a href="http://www.hankcs.com/nihongonote/tekusuto/%e7%ac%ac%e5%85%ad%e5%86%8c/">第六册</a></li>
		<li id="menu-item-3604" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3604"><a href="http://www.hankcs.com/nihongonote/tekusuto/%e7%ac%ac%e4%b8%83%e5%86%8c/">第七册</a></li>
	</ul>
</li>
	<li id="menu-item-1859" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1859"><a href="http://www.hankcs.com/nihongonote/fd2/">新编日语阅读文选</a>
	<ul class="sub-menu">
		<li id="menu-item-2187" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2187"><a href="http://www.hankcs.com/nihongonote/fd2/c1/">第一册</a></li>
		<li id="menu-item-2189" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2189"><a href="http://www.hankcs.com/nihongonote/fd2/c2/">第二册</a></li>
		<li id="menu-item-2188" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2188"><a href="http://www.hankcs.com/nihongonote/fd2/c3/">第三册</a></li>
	</ul>
</li>
	<li id="menu-item-1858" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1858"><a href="http://www.hankcs.com/nihongonote/jpkaiwa/">日语商务贸易会话</a></li>
</ul>
</li>
<li id="menu-item-1843" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1843"><a href="http://www.hankcs.com/about/">关于</a></li>
							<li class="navto-search"><a href="javascript:;" class="search-show active"><i class="fa fa-search"></i></a></li>
					</ul>
		<div class="topbar">
			<ul class="site-nav topmenu">
				<li id="menu-item-5755" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5755"><a href="http://www.hankcs.com/about/#comments"><i class="fa fa-comment"></i> 留言板</a></li>
				<li><a target="_blank" rel="external nofollow" href="https://github.com/hankcs"><i class="fa fa-github-alt"></i> GitHub</a></li>                                <li><a target="_blank" rel="external nofollow" href="http://weibo.com/hankcs"><i class="fa fa-weibo"></i> 微博</a></li>                                <li><a target="_blank" rel="external nofollow" href="https://twitter.com/hankcs"><i class="fa fa-twitter"></i> Twitter</a></li>                                <li><a target="_blank" href="http://www.hankcs.com/feed"><i class="fa fa-rss"></i> RSS订阅</a></li>			</ul>
							&nbsp; &nbsp; <i class="fa fa-bullhorn url"></i> 恕不接待索要源码语料者、索求技术方案者、以及不Google的懒人。					</div>
		<i class="fa fa-bars m-icon-nav"></i>
	</div>
</header>
<div class="site-search">
	<div class="container">
		<form method="get" class="site-search-form" action="http://www.hankcs.com/"><input class="search-input" name="s" type="text" placeholder="输入关键字" value=""><button class="search-btn" type="submit"><i class="fa fa-search"></i></button></form>	</div>
</div><section class="container">
	<div class="content-wrap">
	<div class="content">
				<header class="article-header">
			<h1 class="article-title"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html">200行Python代码实现感知机词性标注器</a></h1>
			<div class="article-meta">
				<span class="item">
					<a href="http://www.hankcs.com/">码农场</a> <small>&gt;</small> <a href="http://www.hankcs.com/nlp/">自然语言处理</a><span class="muted"></span>				</span>
				<span class="item">2016-09-04</span>
																<span class="item post-views">阅读(1292)</span>				<span class="item"><a class="pc" href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#respond">评论(1)</a></span>				<span class="item"></span>
			</div>
		</header>
		<article class="article-content">
			<div class="asb asb-post asb-post-01"><script async="" src="./200行Python代码实现感知机词性标注器_files/adsbygoogle.js.下载"></script>
<!-- 文章页 - 页面标题下 728 90 -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1152644711996772" data-ad-slot="5413029241" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:728px;height:90px;" src="./200行Python代码实现感知机词性标注器_files/saved_resource.html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>			<div class="post_nav" style="width: 0px;"><div class="post_nav_side" style="height: 100%;"><div class="post_nav_top"><p>目录</p></div><div class="post_nav_bottom"></div><span class="post_nav_close icon-remove" title="关闭目录" style="opacity: 0; display: none;"><i class="fa fa-times"></i></span></div><ul class="post_nav_content"><li class="h2_nav active"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h2-0">平均感知机</a><i class="post_nav_dot"></i></li>
<li class="h3_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h3-1">预测</a><i class="post_nav_dot"></i></li>
<li class="h3_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h3-2">训练</a><i class="post_nav_dot"></i></li>
<li class="h3_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h3-3">平均权重</a><i class="post_nav_dot"></i></li>
<li class="h3_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h3-4">特征和预处理</a><i class="post_nav_dot"></i></li>
<li class="h3_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h3-5">搜索</a><i class="post_nav_dot"></i></li>
<li class="h2_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h2-6">完整代码</a><i class="post_nav_dot"></i></li>
<li class="h2_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h2-7">最终比较</a><i class="post_nav_dot"></i></li>
<li class="h2_nav"><a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#h2-8">Reference</a><i class="post_nav_dot"></i></li>
</ul></div><p style="text-indent: 2em;">译自Matthew的《A Good Part-of-Speech Tagger in about 200 Lines of Python》，本文用最精简的代码演示了如何写一个基于<a href="http://www.hankcs.com/ml/the-perceptron.html" target="_blank">感知机</a>的高性能词性标注器。以下是正文：</p>
<p style="text-align:center"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645gw1f7h82lody6j21jk0imwo9.jpg" title="pos-tagger_large.jpg" alt="pos-tagger_large.jpg" data-tag="bdshare"></p>
<p style="text-indent: 2em;">自然语言处理的最新技术大部分都停留在学术界，但学术界往往非常谨慎、不愿意把话说满以免作茧自缚。但太谦虚也没有意义，本文就展示了如何写一个高性能的词性标注器。</p>
<p style="text-indent: 2em;">现在有成千上万种所谓的“最好的词性标注技术”，但它们都没有卵用，你用Averaged Perceptron就行了。（译注：术语<span style="text-indent: 32px;">Averaged Perceptron在</span>中文学术界常用平均感知机，也有简称AP的用法）<img src="./200行Python代码实现感知机词性标注器_files/6cbb8645gw1f7h8949q4cj20jk0da0tp.jpg" title="屏幕快照 2016-09-03 下午7.02.24.png" alt="屏幕快照 2016-09-03 下午7.02.24.png" width="0" height="0" border="0" vspace="0" style="width: 0px; height: 0px;" data-tag="bdshare"></p>
<p style="text-indent: 2em;">你应该用上两个词的词性，以及Brown word clusters中用到的那些特征。</p>
<p style="text-indent: 2em;">如果你的需求只是将标注器用于那些规范的文本，那么你应该用大小写敏感的特征，但如果你想要写一个更健壮的标注器，那你就不要这么做，因为这么做会使得标注器在训练数据上过拟合。相反，那些能够反映“在互联网大型语料上这个词不计大小写时的词频”的特征挺有用。这时，你就可以把语料中的词语都转成小写。</p>
<p style="text-indent: 2em;">为了效率起见，你应该找出训练数据中哪些词语仅有唯一的词性，这样当你碰到它们的时候只需直接输出就行了。大约有50%的词语的词性都是唯一的。</p>
<p style="text-indent: 2em;">除非你真的真的不愿意放弃那0.1%的准确率提升，否则你就不必操心各种各样的搜索算法（译注：viterbi、NBest等），直接上一个贪心算法就行了（如同许多用户发现的一样，HanLP的<a href="http://www.hankcs.com/nlp/part-of-speech-tagging.html" target="_blank">HMM词性标注</a>采用的就是决策长度为2的贪心算法）。</p>
<p style="text-indent: 2em;">如果你全都听我的，你就会发现你的标注器既好写又好懂，并且一个高效的Cython实现可以在13万的华尔街语料上跑出下列成绩：</p>
<p style="text-indent: 2em;"></p>
<table class="table table--parameters" width="NaN">
<tbody style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<tr class="table-row firstRow" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TAGGER</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">ACCURARCY</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TIME (130K WORDS)</th>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">CyGreedyAP</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">97.1%</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; word-break: break-all; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">4s</td>
</tr>
</tbody>
</table>
<p></p>
<p style="text-indent: 2em;">这4秒包含了初始化的时间——实际的标注速度会更快，绝对不会成为程序的性能瓶颈。</p>
<p style="text-indent: 2em;">看着这97%的准确率站着说点不腰疼的话是很简单的，但这并没有意义。在手工精心整理的数据集上，我的标注器还可以上升1个百分点，另外，任何标注器在开放领域上的表现都很差。幸运的是，最近10年这种差别正在逐渐减小。这也是我为什么推荐使用一个准确度良好但速度超级快的标注器的原因。</p>
<p style="text-indent: 2em;">但可笑的是，我经常看到人们用一些很糟糕的标注器！比如，那些新手们总喜欢用如下两个工具：</p>
<table class="table table--parameters" width="NaN">
<tbody style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<tr class="table-row firstRow" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TAGGER</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">ACCURARCY</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TIME (130K WORDS)</th>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">NLTK</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">94.0%</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">3m56s</td>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">Pattern</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">93.5%</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; word-break: break-all; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">26s</td>
</tr>
</tbody>
</table>
<p style="text-indent: 2em;">Pattern和NLTK的代码都非常健壮，并且文档丰富，所以很多人爱用它们。但Pattern的算法非常烂，而NLTK则拖家带口地附带了一堆包，因为它还承担着教学演示的任务。</p>
<p style="text-indent: 2em;">作为一个独立的标注器，我的Cython实现有点过于复杂了，因为是为我的Parser配套写的。所以今天我用Python写了一个200行的替代品，它的性能是：</p>
<table class="table table--parameters" width="NaN">
<tbody style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<tr class="table-row firstRow" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TAGGER</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">ACCURARCY</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TIME (130K WORDS)</th>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">PyGreedyAP</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">96.8%</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; word-break: break-all; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">12s</td>
</tr>
</tbody>
</table>
<p style="text-indent: 2em;">为了保证代码简洁，我牺牲了一些准确率和速度。下面就是关于它的原理。</p>
<h2 id="h2-0">平均感知机</h2>
<p style="text-indent: 2em;">词性标注是一个监督学习，所谓监督学习，指的是给你一张表格，并且告诉你在测试的时候最后一列会被拿掉。你的工作就是通过其他列去预测最后这一列。</p>
<p style="text-indent: 2em;">对于词性标注来讲，缺失的这一列就是词性。其他列（特征）可能是“上个词”的词性，“下个词的最后三个字符”之类的信息。</p>
<h3 id="h3-1">预测</h3>
<p style="text-indent: 2em;">首先，让我们看看预测的代码：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln">&nbsp;predict</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln">&nbsp;features</span><span class="pun">):</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'''Dot-product&nbsp;the&nbsp;features&nbsp;and&nbsp;current&nbsp;weights&nbsp;and&nbsp;return&nbsp;the&nbsp;best&nbsp;label.'''</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;scores&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;defaultdict</span><span class="pun">(</span><span class="kwd">float</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;feat</span><span class="pun">,</span><span class="pln">&nbsp;value&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;features</span><span class="pun">.</span><span class="pln">items</span><span class="pun">():</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;feat&nbsp;</span><span class="kwd">not</span><span class="pln">&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights&nbsp;</span><span class="kwd">or</span><span class="pln">&nbsp;value&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;</span><span class="lit">0</span><span class="pun">:</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">continue</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;weights&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">[</span><span class="pln">feat</span><span class="pun">]</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;label</span><span class="pun">,</span><span class="pln">&nbsp;weight&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;weights</span><span class="pun">.</span><span class="pln">items</span><span class="pun">():</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scores</span><span class="pun">[</span><span class="pln">label</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;value&nbsp;</span><span class="pun">*</span><span class="pln">&nbsp;weight</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#&nbsp;Do&nbsp;a&nbsp;secondary&nbsp;alphabetic&nbsp;sort,&nbsp;for&nbsp;stability</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;max</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">classes</span><span class="pun">,</span><span class="pln">&nbsp;key</span><span class="pun">=</span><span class="kwd">lambda</span><span class="pln">&nbsp;label</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="pun">(</span><span class="pln">scores</span><span class="pun">[</span><span class="pln">label</span><span class="pun">],</span><span class="pln">&nbsp;label</span><span class="pun">))</span></li></ol></pre>
<p style="text-indent: 2em;">前面我将学习问题比作一张表格，该表格在预测的时候缺失了最后一列。对NLP来讲，我们的表格通常特别稀疏。表格中可能有一个格子是“上一个词=国会”，这种特征的数量可能接近0。所以我们的“特征向量”可能从来都不会做成向量形式。Map类型是个好主意，在这里我们使用了Python的dictionary类型。</p>
<p style="text-indent: 2em;">输入数据，也就是特征，是表格中频次大于0的那些格子的集合。通常在实现的时候可以写成dictionary类型，这样就可以set值了。但我直接将其写成“命中与否”的二值类型。</p>
<p style="text-indent: 2em;">weight是一个双层的dictionary，保存了特征-&gt;类别-&gt;权重。我特意这么写，而不是把类别作为第一层键的原因是：词语词频差别巨大——低频词非常少见，高频词非常常见。</p>
<h3 id="h3-2">训练</h3>
<p style="text-indent: 2em;">好吧，你说的很有道理，<span style="text-decoration: line-through;">何不给我充Q币？</span>那么怎么学习特征权重呢？我们先初始化一个特征权重dictionary，然后迭代如下步骤：</p>
<p style="text-indent: 2em;">1、输入一个（特征，词性）键值对。</p>
<p style="text-indent: 2em;">2、通过当前的特征权重预测词性。</p>
<p style="text-indent: 2em;">3、如果预测错误，那么将（特征，正确词性）对应的特征权重+1，并且将（特征，错误词性）对应的特征权重-1。</p>
<p style="text-indent: 2em;">这是最简单的训练算法了，只要模型犯了一个错误，就将正确词性对应的特征权重（译注：复数，指的是词性正确那些特征函数，下文同理）增加，并且惩罚那些误导模型的特征函数，写成Python代码如下：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln">&nbsp;train</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln">&nbsp;nr_iter</span><span class="pun">,</span><span class="pln">&nbsp;examples</span><span class="pun">):</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;i&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;range</span><span class="pun">(</span><span class="pln">nr_iter</span><span class="pun">):</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;features</span><span class="pun">,</span><span class="pln">&nbsp;true_tag&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;examples</span><span class="pun">:</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guess&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">(</span><span class="pln">features</span><span class="pun">)</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;guess&nbsp;</span><span class="pun">!=</span><span class="pln">&nbsp;true_tag</span><span class="pun">:</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;f&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;features</span><span class="pun">:</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">true_tag</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;</span><span class="lit">1</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">guess</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">-=</span><span class="pln">&nbsp;</span><span class="lit">1</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random</span><span class="pun">.</span><span class="pln">shuffle</span><span class="pun">(</span><span class="pln">examples</span><span class="pun">)</span></li></ol></pre>
<p style="text-indent: 2em;">如果你在一个训练实例上运行上述代码，该实例的词性相关的权重很快就能算出来。如果是两个训练实例呢？除非它们的特征各不相同，你才可能得到相应的正确结果。一般来讲，算法会连续运行很久，因为训练实例总得一个个输入进来（译注：在线学习）。</p>
<h3 id="h3-3">平均权重</h3>
<p style="text-indent: 2em;">为了让感知机算法真正力压群雄，我们还得努力。上述算法的问题在于，如果你在两个轻微不同的实例上训练的话，你可能会得到截然不同的模型。模型不能聪明地泛化问题。更大的问题在于，如果你让算法跑到收敛，它会过于关注那些误分类的点，并且调整整个模型以适应它们。</p>
<p style="text-indent: 2em;">所以，我们要减小特征权重的变化速度——让模型没法在一个迭代中作太多改变以免前功尽弃。我们的做法是返回平均权重，而不是最终权重。</p>
<p style="text-indent: 2em;">我猜很多人会说，为什么？但我们不是来做学究的，这个做法已经被长时间的实践证明了。如果你有其他主意，欢迎做做试验然后与大家共享。事实上，我很期待看到更多新发现，因为现在平均感知机在NLP中的地位已经变得非常之高了。</p>
<p style="text-indent: 2em;">好了，回过头来继续讨论平均。如何平均呢？注意我们并不在每个外层循环中做平均，我们在内层循环中作平均。如果我们有5000个训练实例，我们训练10个迭代，对每个权重我们平均50000次。</p>
<p style="text-indent: 2em;">我们当然不会把这么多中间变量都存起来了，我们只记录每个权重的累加值，然后除以最终的迭代次数，不就平均了吗。重申一遍，我们想要的是每个（特征，词性）对应的平均权重，所以关键点在于其累计权重。但如何累计权重也是个技术活。对于大部分训练实例，都只会引起特定的几个权重变化，其他特征函数的权重都不会变化。所以我们不应该傻乎乎地将这些不变的权重也累加起来。</p>
<p style="text-indent: 2em;">你我都不是傻瓜，让我们一起实现上述改进算法吧。我们维护一个额外的dictionary，记录每个权重上次变化的时间。当我们改变一个特征权重的时候，我们就取出这个值用于更新。</p>
<p style="text-indent: 2em;">下面就是更新时具体的代码了：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln">&nbsp;update</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln">&nbsp;truth</span><span class="pun">,</span><span class="pln">&nbsp;guess</span><span class="pun">,</span><span class="pln">&nbsp;features</span><span class="pun">):</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">def</span><span class="pln">&nbsp;upd_feat</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln">&nbsp;f</span><span class="pun">,</span><span class="pln">&nbsp;v</span><span class="pun">):</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nr_iters_at_this_weight&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">i&nbsp;</span><span class="pun">-</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_timestamps</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">c</span><span class="pun">]</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_totals</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">c</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;nr_iters_at_this_weight&nbsp;</span><span class="pun">*</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">c</span><span class="pun">]</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">c</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;v</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_timestamps</span><span class="pun">[</span><span class="pln">f</span><span class="pun">][</span><span class="pln">c</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">i</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">i&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;</span><span class="lit">1</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;f&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;features</span><span class="pun">:</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upd_feat</span><span class="pun">(</span><span class="pln">truth</span><span class="pun">,</span><span class="pln">&nbsp;f</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="lit">1.0</span><span class="pun">)</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upd_feat</span><span class="pun">(</span><span class="pln">guess</span><span class="pun">,</span><span class="pln">&nbsp;f</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="pun">-</span><span class="lit">1.0</span><span class="pun">)</span></li></ol></pre>
<h3 id="h3-4">特征和预处理<br></h3>
<p style="text-indent: 2em;">词性标注语料中有成千上万错综复杂的特征，包括大小写和标点符号等。它们对华尔街语料的准确率是有帮助的，但我没见到对其他语料有任何帮助。</p>
<p style="text-indent: 2em;">为了训练一个更通用的模型，我们将在特征提取之前预处理数据：</p>
<ul class=" list-paddingleft-2" style="list-style-type: disc;">
<li>
<p style="text-indent: 2em;">所有词语都转小写</p>
</li>
<li>
<p style="text-indent: 2em;">1800-2100之间的数字被转义为!YEAR</p>
</li>
<li>
<p style="text-indent: 2em;">其他数字被转义为!DIGITS</p>
</li>
<li>
<p style="text-indent: 2em;">写一个专门识别日期、电话号码、邮箱等的模块可能更好，但这会使问题复杂化，成为分词器了</p>
</li>
</ul>
<p style="text-indent: 2em;">我用过这些特征，考虑到它们能够取得的97%的成绩、以及较低的内存占用，它们还是很划算的。</p>
<p style="text-indent: 2em;">特征提取代码如下：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln">&nbsp;_get_features</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln">&nbsp;i</span><span class="pun">,</span><span class="pln">&nbsp;word</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">,</span><span class="pln">&nbsp;prev</span><span class="pun">,</span><span class="pln">&nbsp;prev2</span><span class="pun">):</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'''Map&nbsp;tokens-in-contexts&nbsp;into&nbsp;a&nbsp;feature&nbsp;representation,&nbsp;implemented&nbsp;as&nbsp;a</span></li><li class="L2"><span class="str">&nbsp;&nbsp;&nbsp;&nbsp;set.&nbsp;If&nbsp;the&nbsp;features&nbsp;change,&nbsp;a&nbsp;new&nbsp;model&nbsp;must&nbsp;be&nbsp;trained.'''</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">def</span><span class="pln">&nbsp;add</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="pun">*</span><span class="pln">args</span><span class="pun">):</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;features</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'+'</span><span class="pun">.</span><span class="pln">join</span><span class="pun">((</span><span class="pln">name</span><span class="pun">,)</span><span class="pln">&nbsp;</span><span class="pun">+</span><span class="pln">&nbsp;tuple</span><span class="pun">(</span><span class="pln">args</span><span class="pun">)))</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;features&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">set</span><span class="pun">()</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'bias'</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="com">#&nbsp;This&nbsp;acts&nbsp;sort&nbsp;of&nbsp;like&nbsp;a&nbsp;prior</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i&nbsp;suffix'</span><span class="pun">,</span><span class="pln">&nbsp;word</span><span class="pun">[-</span><span class="lit">3</span><span class="pun">:])</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i&nbsp;pref1'</span><span class="pun">,</span><span class="pln">&nbsp;word</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-1&nbsp;tag'</span><span class="pun">,</span><span class="pln">&nbsp;prev</span><span class="pun">)</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-2&nbsp;tag'</span><span class="pun">,</span><span class="pln">&nbsp;prev2</span><span class="pun">)</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i&nbsp;tag+i-2&nbsp;tag'</span><span class="pun">,</span><span class="pln">&nbsp;prev</span><span class="pun">,</span><span class="pln">&nbsp;prev2</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-1&nbsp;tag+i&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;prev</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-1&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">])</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-1&nbsp;suffix'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][-</span><span class="lit">3</span><span class="pun">:])</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i-2&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">2</span><span class="pun">])</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i+1&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">])</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i+1&nbsp;suffix'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][-</span><span class="lit">3</span><span class="pun">:])</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;add</span><span class="pun">(</span><span class="str">'i+2&nbsp;word'</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">])</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;features</span></li></ol></pre>
<p style="text-indent: 2em;">我没有加入外部特征，比如从Google Web 1T中统计出的词频等。我可能会在后续版本加入这些，但现在还是保持精简吧。</p>
<h3 id="h3-5">搜索</h3>
<p style="text-indent: 2em;">我推荐的模型直接输出当前词语的词性，然后处理下一个。这些预测词性之后作为下一个词语的特征。这么做有潜在问题，但问题也不大。用柱搜索很容易解决，但照我说根本不值得。更不用说采用类似如条件随机场那样的又慢又复杂的算法了。</p>
<p style="text-indent: 2em;">这个潜在的问题是这样的：当前位置假设是3，上个词语和下个词语是2和4，在当前位置决定词性的最佳因素可能是词语本身，但次之就是2和4的词性了。于是就导致了一个“鸡生蛋”的问题：我们想要预测3的词性，可是它会用到未确定的2或4的词性。举个具体的例子：</p>
<pre class="prettyprint lang-plain linenums"><ol class="linenums"><li class="L0"><span class="typ">Their</span><span class="pln">&nbsp;management&nbsp;plan&nbsp;reforms&nbsp;worked</span></li></ol></pre>
<p style="text-indent: 2em;">根据上述算法，你可以发现从左到右处理句子和从右到左会得到完全不同的结果。</p>
<p style="text-indent: 2em;">如果你还没明白，那就这么思考：从右往左看，“worked”很可能是个动词，所以基于此把“reform”标注为名词。但如果你从左往右、从“plan”出发，可能就会觉得“reform”是名词或动词。</p>
<p style="text-indent: 2em;">只有当你会犯错的时候才需要用搜索。它可以防止错误的传播，或者说你将来的决策会改正这个错误。这就是为什么对词性标注来说，搜索非常重要！你的模型非常棒的时候，你过去做的决定总是对的的话，你就不需要搜索了。</p>
<p style="text-indent: 2em;">当我们改进标注器后，搜索的重要性就会下降。相较于搜索，我们更应关注多标签。如果我们让模型不那么确定，当允许单个词语平均有1.05个词性的时候，我们可以得到99%的准确率（Vadas et al, ACL 2006）。虽然平均感知机对于多标签任务就是个垃圾，但这本来就不是它的强项，你应该用一些概率模型。</p>
<p style="text-indent: 2em;">贪心搜索的时候注意，模型必须假设测试时历史标签是不完美的。否则它就会过于依赖历史标签。由于感知机是迭代式的，所以这很简单。</p>
<p style="text-indent: 2em;">下面是标注器的训练主循环：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln">&nbsp;train</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln">&nbsp;sentences</span><span class="pun">,</span><span class="pln">&nbsp;save_loc</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">,</span><span class="pln">&nbsp;nr_iter</span><span class="pun">=</span><span class="lit">5</span><span class="pun">,</span><span class="pln">&nbsp;quiet</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">):</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'''Train&nbsp;a&nbsp;model&nbsp;from&nbsp;sentences,&nbsp;and&nbsp;save&nbsp;it&nbsp;at&nbsp;save_loc.&nbsp;nr_iter</span></li><li class="L2"><span class="str">&nbsp;&nbsp;&nbsp;&nbsp;controls&nbsp;the&nbsp;number&nbsp;of&nbsp;Perceptron&nbsp;training&nbsp;iterations.'''</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_make_tagdict</span><span class="pun">(</span><span class="pln">sentences</span><span class="pun">,</span><span class="pln">&nbsp;quiet</span><span class="pun">=</span><span class="pln">quiet</span><span class="pun">)</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="pln">classes&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">classes</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;prev</span><span class="pun">,</span><span class="pln">&nbsp;prev2&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;START&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;iter_&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;range</span><span class="pun">(</span><span class="pln">nr_iter</span><span class="pun">):</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="lit">0</span><span class="pun">;</span><span class="pln">&nbsp;n&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="lit">0</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;words</span><span class="pun">,</span><span class="pln">&nbsp;tags&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;sentences</span><span class="pun">:</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;START&nbsp;</span><span class="pun">+</span><span class="pln">&nbsp;</span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_normalize</span><span class="pun">(</span><span class="pln">w</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;w&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;words</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">+</span><span class="pln">&nbsp;</span><span class="kwd">END</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;i</span><span class="pun">,</span><span class="pln">&nbsp;word&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;enumerate</span><span class="pun">(</span><span class="pln">words</span><span class="pun">):</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guess&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">tagdict</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">word</span><span class="pun">)</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;</span><span class="kwd">not</span><span class="pln">&nbsp;guess</span><span class="pun">:</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;feats&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">_get_features</span><span class="pun">(</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i</span><span class="pun">,</span><span class="pln">&nbsp;word</span><span class="pun">,</span><span class="pln">&nbsp;context</span><span class="pun">,</span><span class="pln">&nbsp;prev</span><span class="pun">,</span><span class="pln">&nbsp;prev2</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guess&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">(</span><span class="pln">feats</span><span class="pun">)</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">tags</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">&nbsp;guess</span><span class="pun">,</span><span class="pln">&nbsp;feats</span><span class="pun">)</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#&nbsp;Set&nbsp;the&nbsp;history&nbsp;features&nbsp;from&nbsp;the&nbsp;guesses,&nbsp;not&nbsp;the</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#&nbsp;true&nbsp;tags</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev2&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;prev</span><span class="pun">;</span><span class="pln">&nbsp;prev&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;guess</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;guess&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;tags</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">&nbsp;n&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;</span><span class="lit">1</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random</span><span class="pun">.</span><span class="pln">shuffle</span><span class="pun">(</span><span class="pln">sentences</span><span class="pun">)</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;</span><span class="kwd">not</span><span class="pln">&nbsp;quiet</span><span class="pun">:</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Iter&nbsp;%d:&nbsp;%d/%d=%.3f"</span><span class="pln">&nbsp;</span><span class="pun">%</span><span class="pln">&nbsp;</span><span class="pun">(</span><span class="pln">iter_</span><span class="pun">,</span><span class="pln">&nbsp;c</span><span class="pun">,</span><span class="pln">&nbsp;n</span><span class="pun">,</span><span class="pln">&nbsp;_pc</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln">&nbsp;n</span><span class="pun">)))</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="pln">average_weights</span><span class="pun">()</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#&nbsp;Pickle&nbsp;as&nbsp;a&nbsp;binary&nbsp;file</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;save_loc&nbsp;</span><span class="kwd">is</span><span class="pln">&nbsp;</span><span class="kwd">not</span><span class="pln">&nbsp;</span><span class="kwd">None</span><span class="pun">:</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cPickle</span><span class="pun">.</span><span class="kwd">dump</span><span class="pun">((</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">model</span><span class="pun">.</span><span class="pln">weights</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">tagdict</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">classes</span><span class="pun">),</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open</span><span class="pun">(</span><span class="pln">save_loc</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="str">'wb'</span><span class="pun">),</span><span class="pln">&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></li></ol></pre>
<p style="text-indent: 2em;">与上一段代码不同，我尝试让代码更简单。如果存在bug，那肯定是这个原因。</p>
<h2 id="h2-6">完整代码</h2>
<p style="text-indent: 2em;">（译注：作者将代码集成到TextBlob中，这不利于学习。我将其感知机代码拆分独立出来，并且配上了训练数据，本文全部源码和测试数据在：<a href="https://github.com/hankcs/AveragedPerceptronPython" _src="https://github.com/hankcs/AveragedPerceptronPython" target="_blank" rel="external nofollow">https://github.com/hankcs/AveragedPerceptronPython</a>&nbsp;）</p>
<p style="text-indent: 2em;">其调用方式如下：</p>
<pre class="prettyprint lang-python linenums"><ol class="linenums"><li class="L0"><span class="pln">tagger&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="typ">PerceptronTagger</span><span class="pun">(</span><span class="kwd">False</span><span class="pun">)</span></li><li class="L1"><span class="kwd">try</span><span class="pun">:</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;tagger</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(</span><span class="pln">PICKLE</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">tagger</span><span class="pun">.</span><span class="pln">tag</span><span class="pun">(</span><span class="str">'are&nbsp;you&nbsp;ok&nbsp;?'</span><span class="pun">))</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;logging</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">'Start&nbsp;testing...'</span><span class="pun">)</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;right&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="lit">0.0</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="lit">0.0</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;sentence&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">([],</span><span class="pln">&nbsp;</span><span class="pun">[])</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;line&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;open</span><span class="pun">(</span><span class="str">'data/test.txt'</span><span class="pun">):</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">params</span><span class="pln">&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;line</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="pun">!=</span><span class="pln">&nbsp;</span><span class="lit">2</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="kwd">continue</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence</span><span class="pun">[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;</span><span class="str">'.'</span><span class="pun">:</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="str">''</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;words&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;sentence</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tags&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;sentence</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;i</span><span class="pun">,</span><span class="pln">&nbsp;word&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;enumerate</span><span class="pun">(</span><span class="pln">words</span><span class="pun">):</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;word</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;i&nbsp;</span><span class="pun">&lt;</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">words</span><span class="pun">):</span><span class="pln">&nbsp;text&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;</span><span class="str">'&nbsp;'</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputs&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;tagger</span><span class="pun">.</span><span class="pln">tag</span><span class="pun">(</span><span class="pln">text</span><span class="pun">)</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">assert</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">tags</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">outputs</span><span class="pun">)</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">tags</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;o</span><span class="pun">,</span><span class="pln">&nbsp;t&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;zip</span><span class="pun">(</span><span class="pln">outputs</span><span class="pun">,</span><span class="pln">&nbsp;tags</span><span class="pun">):</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;o</span><span class="pun">[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">strip</span><span class="pun">()</span><span class="pln">&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;t</span><span class="pun">:</span><span class="pln">&nbsp;right&nbsp;</span><span class="pun">+=</span><span class="pln">&nbsp;</span><span class="lit">1</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">([],</span><span class="pln">&nbsp;</span><span class="pun">[])</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;logging</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Precision&nbsp;:&nbsp;%f"</span><span class="pun">,</span><span class="pln">&nbsp;right&nbsp;</span><span class="pun">/</span><span class="pln">&nbsp;total</span><span class="pun">)</span></li><li class="L7"><span class="kwd">except</span><span class="pln">&nbsp;</span><span class="typ">IOError</span><span class="pun">:</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;logging</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">'Reading&nbsp;corpus...'</span><span class="pun">)</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;training_data&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">[]</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;sentence&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">([],</span><span class="pln">&nbsp;</span><span class="pun">[])</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;line&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;open</span><span class="pun">(</span><span class="str">'data/train.txt'</span><span class="pun">):</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">params</span><span class="pln">&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;line</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'\t'</span><span class="pun">)</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence</span><span class="pun">[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;</span><span class="kwd">params</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="pun">==</span><span class="pln">&nbsp;</span><span class="str">'.'</span><span class="pun">:</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;training_data</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">sentence</span><span class="pun">)</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sentence&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">([],</span><span class="pln">&nbsp;</span><span class="pun">[])</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;logging</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">'training&nbsp;corpus&nbsp;size&nbsp;:&nbsp;%d'</span><span class="pun">,</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">training_data</span><span class="pun">))</span></li><li class="L9"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;logging</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">'Start&nbsp;training...'</span><span class="pun">)</span></li><li class="L0"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;tagger</span><span class="pun">.</span><span class="pln">train</span><span class="pun">(</span><span class="pln">training_data</span><span class="pun">,</span><span class="pln">&nbsp;save_loc</span><span class="pun">=</span><span class="pln">PICKLE</span><span class="pun">)</span></li></ol></pre>
<p style="text-indent: 2em;">注意，由于该Python实现注重代码的清晰度胜于效率，所以训练速度很慢。我在GitHub上使用的是一个非常非常小的训练集，所以在测试集上的分数较低，这不作为该算法或该实现的性能评测，特此说明。</p>
<h2 id="h2-7">最终比较<br></h2>
<p style="text-indent: 2em;">这几年我听过很多非议华尔街语料评测的言论，他们认为我们过拟合了。事实上，我可以证明这是错误的。一般来说，如果一项技术在某个评测上面显著地更好，那么它在其他评测也应该更好。我使用了同一个模型在其他语料上做了测试，证实了我的说法：</p>
<table class="table table--parameters" width="NaN">
<tbody style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<tr class="table-row firstRow" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">TAGGER</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">WSJ</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">ABC</th>
<th class="table-head-cell" style="border-color: rgb(228, 81, 79); box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; font-size: 1.6rem; line-height: 1.375; font-family: &quot;Work Sans&quot;, &quot;Arial Black&quot;, Gadget, sans-serif; text-transform: uppercase; color: rgb(255, 255, 255); background: rgb(228, 81, 79);">WEB</th>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">Pattern</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">93.5</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">90.7</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">88.1</td>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">NLTK</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">94.0</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">91.5</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">88.4</td>
</tr>
<tr class="table-row" style="border: 0px; box-sizing: border-box; margin: 0px; outline: 0px; padding: 0px; -webkit-font-smoothing: antialiased;">
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; background-image: linear-gradient(to right, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-repeat: no-repeat;">PyGreedyAP</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">96.8</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top;">94.8</td>
<td class="table-cell" style="box-sizing: border-box; margin: 0px; outline: 0px; padding: 1em; -webkit-font-smoothing: antialiased; vertical-align: top; word-break: break-all; background-image: linear-gradient(to left, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 100%); background-size: 20px 100%; background-position: 100% 0px; background-repeat: no-repeat;">91.8</td>
</tr>
</tbody>
</table>
<p style="text-indent: 2em;">（译注：WSJ指的是华尔街语料，不是卫生巾）</p>
<p style="text-indent: 2em;">如你所见，我的标注器排名很稳定，并且优势很明显。事实上，Pattern标注器在开放领域简直烂透了，它几乎跟个傻乎乎的词典一样，所以极其受限于领域。我以前还没发现，现在吓了一跳。</p>
<p style="text-indent: 2em;">我们可以在其他语料上多训练训练，以提高成绩。我训练的时候参考的是Daume III, 2007这篇论文。</p>
<h2 id="h2-8">Reference</h2>
<p style="text-indent: 2em;"><a href="https://spacy.io/blog/part-of-speech-pos-tagger-in-python" _src="https://spacy.io/blog/part-of-speech-pos-tagger-in-python" target="_blank" rel="external nofollow">https://spacy.io/blog/part-of-speech-pos-tagger-in-python</a></p>
<p class="post-copyright"><a href="http://www.hankcs.com/license/" target="_blank"><img alt="知识共享许可协议" style="border-width: 0px;margin: 0 !important;" src="./200行Python代码实现感知机词性标注器_files/CC-BY-NC-SA-icon-88x31.png" width="88" height="31" border="0" vspace="0" title="知识共享许可协议" data-tag="bdshare"></a>&nbsp;<a href="http://www.hankcs.com/license/" target="_blank" textvalue="知识共享署名-非商业性使用-相同方式共享">知识共享署名-非商业性使用-相同方式共享</a>：<a href="http://www.hankcs.com/">码农场</a> » <a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html">200行Python代码实现感知机词性标注器</a></p>		</article>
								<div class="action-share bdsharebuttonbox bdshare-button-style0-24" data-bd-bind="1500346138861">
			<span>分享到：</span><a class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a><a class="bds_bdhome" data-cmd="bdhome" title="分享到百度新首页"></a><a class="bds_tqf" data-cmd="tqf" title="分享到腾讯朋友"></a><a class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a class="bds_diandian" data-cmd="diandian" title="分享到点点网"></a><a class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a><a class="bds_ty" data-cmd="ty" title="分享到天涯社区"></a><a class="bds_kaixin001" data-cmd="kaixin001" title="分享到开心网"></a><a class="bds_taobao" data-cmd="taobao"></a><a class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a><a class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a class="bds_mail" data-cmd="mail" title="分享到邮件分享"></a><a class="bds_copy" data-cmd="copy" title="分享到复制网址"></a><a class="bds_more" data-cmd="more">更多</a> <span>(</span><a class="bds_count" data-cmd="count" title="累计分享4次">4</a><span>)</span>		</div>
		<div class="article-tags">继续浏览有关 <a href="http://www.hankcs.com/nlp/"><i class="fa fa-folder-open"></i> 自然语言处理</a><a href="http://www.hankcs.com/tag/%e6%84%9f%e7%9f%a5%e6%9c%ba/" rel="tag">感知机</a><a href="http://www.hankcs.com/tag/%e7%bb%b4%e7%89%b9%e6%af%94%e7%ae%97%e6%b3%95/" rel="tag">维特比算法</a><a href="http://www.hankcs.com/tag/%e8%af%8d%e6%80%a7%e6%a0%87%e6%b3%a8/" rel="tag">词性标注</a> 的文章</div>		<div class="asb asb-post asb-post-02"><script async="" src="./200行Python代码实现感知机词性标注器_files/adsbygoogle.js.下载"></script>
<!-- 文章页正文下 页首横幅 -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1152644711996772" data-ad-slot="2657945648" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:728px;height:90px;" src="./200行Python代码实现感知机词性标注器_files/saved_resource(1).html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>		<nav class="article-nav">
			<span class="article-nav-prev">上一篇 <a href="http://www.hankcs.com/nlp/simplified-traditional-chinese-conversion.html" rel="prev">HanLP极致简繁转换</a></span>
			<span class="article-nav-next"><a href="http://www.hankcs.com/nlp/michael-collins-machine-translation.html" rel="next">Michael Collins NLP公开课任务3 机器翻译</a> 下一篇</span>
		</nav>
				<div class="asb asb-post asb-post-03"><script async="" src="./200行Python代码实现感知机词性标注器_files/adsbygoogle.js.下载"></script>
<!-- 匹配内容 -->
<ins class="adsbygoogle" style="display: block; height: 466px;" data-ad-client="ca-pub-1152644711996772" data-ad-slot="7343699642" data-ad-format="autorelaxed" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:466px;margin:0;padding:0;position:relative;visibility:visible;width:778px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:466px;margin:0;padding:0;position:relative;visibility:visible;width:778px;background-color:transparent"><iframe width="778" height="466" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;width:778px;height:466px;" src="./200行Python代码实现感知机词性标注器_files/saved_resource(2).html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>		<div class="title" id="comments">
	<h3>评论 <b>1</b></h3>
</div>
<div id="respond" class="no_webshot">
		
	<form action="http://www.hankcs.com/wp-comments-post.php" method="post" id="commentform">
		<div class="comt">
			<div class="comt-title">
				<img alt="" data-src="http://2.gravatar.com/avatar/?s=50&amp;d=http%3A%2F%2Fwww.hankcs.com%2Fwp-content%2Fthemes%2Fdux%2Fimg%2Favatar-default.png&amp;r=g" srcset="http://2.gravatar.com/avatar/?s=100&amp;d=http%3A%2F%2Fwww.hankcs.com%2Fwp-content%2Fthemes%2Fdux%2Fimg%2Favatar-default.png&amp;r=g 2x" class="avatar avatar-50 photo avatar-default" height="50" width="50" src="./200行Python代码实现感知机词性标注器_files/avatar-default.png">				<p><a id="cancel-comment-reply-link" href="javascript:;">取消</a></p>
			</div>
			<div class="comt-box">
				<textarea placeholder="此处不受理任何开源项目问题，请在GitHub上发issue ，大家一起讨论，谢谢。" class="input-block-level comt-area" name="comment" id="comment" cols="100%" rows="3" tabindex="1" onkeydown="if(event.ctrlKey&amp;&amp;event.keyCode==13){document.getElementById(&#39;submit&#39;).click();return false};"></textarea>
				<div class="comt-ctrl">
					<div class="comt-tips"><input type="hidden" name="comment_post_ID" value="8152" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="7d062f1144"></p><label for="comment_mail_notify" class="checkbox inline hide" style="padding-top:0"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked">有人回复时邮件通知我</label><p style="display: none;"></p><div class="comt-tip comt-loading" style="display: none;">评论提交中...</div><div class="comt-tip comt-error" style="display: none;">#</div></div>
					<button type="submit" name="submit" id="submit" tabindex="5">提交评论</button>
					<!-- <span data-type="comment-insert-smilie" class="muted comt-smilie"><i class="icon-thumbs-up icon12"></i> 表情</span> -->
				</div>
			</div>

												<div class="comt-comterinfo" id="comment-author-info">
						<ul>
							<li class="form-inline"><label class="hide" for="author">昵称</label><input class="ipt" type="text" name="author" id="author" value="" tabindex="2" placeholder="昵称"><span class="text-muted">昵称 (必填)</span></li>
							<li class="form-inline"><label class="hide" for="email">邮箱</label><input class="ipt" type="text" name="email" id="email" value="" tabindex="3" placeholder="邮箱"><span class="text-muted">邮箱 (必填)</span></li>
							<li class="form-inline"><label class="hide" for="url">网址</label><input class="ipt" type="text" name="url" id="url" value="" tabindex="4" placeholder="网址"><span class="text-muted">网址</span></li>
						</ul>
					</div>
									</div>

	<input type="hidden" id="ak_js" name="ak_js" value="1500346138568"></form>
	</div>
<div id="postcomments">
	<ol class="commentlist">
		<li class="comment even thread-even depth-1" id="comment-4346"><span class="comt-f">#1</span><div class="comt-avatar"><img alt="" data-src="http://0.gravatar.com/avatar/6bfc03052440949dc2270907250f12ed?s=50&amp;d=http%3A%2F%2Fwww.hankcs.com%2Fwp-content%2Fthemes%2Fdux%2Fimg%2Favatar-default.png&amp;r=g" srcset="http://0.gravatar.com/avatar/6bfc03052440949dc2270907250f12ed?s=100&amp;d=http%3A%2F%2Fwww.hankcs.com%2Fwp-content%2Fthemes%2Fdux%2Fimg%2Favatar-default.png&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" src="./200行Python代码实现感知机词性标注器_files/avatar-default.png"></div><div class="comt-main" id="div-comment-4346"><p>恩，这个方法是挺不错的</p>
<div class="comt-meta"><span class="comt-author"><a href="https://www.licoy.cn/" rel="external nofollow" class="url" target="_blank">Licoy</a></span>11个月前 (09-04)<a rel="nofollow" class="comment-reply-link" href="javascript:;" onclick="return addComment.moveForm( &quot;div-comment-4346&quot;, &quot;4346&quot;, &quot;respond&quot;, &quot;8152&quot; )" aria-label="回复给Licoy">回复</a></div></div></li><!-- #comment-## -->
	</ol>
	<div class="pagenav">
			</div>
</div>
	</div>
	</div>
	<aside class="sidebar">
<div class="widget widget_categories affix-top" style="top: 0px;"><h3>栏目分类</h3><label class="screen-reader-text" for="cat">栏目分类</label><select name="cat" id="cat" class="postform">
	<option value="-1">选择分类目录</option>
	<option class="level-0" value="18">ACG&nbsp;&nbsp;(7)</option>
	<option class="level-1" value="117">&nbsp;&nbsp;&nbsp;游戏&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="7">Web开发&nbsp;&nbsp;(80)</option>
	<option class="level-1" value="64">&nbsp;&nbsp;&nbsp;BAE&nbsp;&nbsp;(13)</option>
	<option class="level-1" value="11">&nbsp;&nbsp;&nbsp;Linux相关&nbsp;&nbsp;(9)</option>
	<option class="level-1" value="54">&nbsp;&nbsp;&nbsp;Mac OS&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="27">&nbsp;&nbsp;&nbsp;WordPress&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="65">&nbsp;&nbsp;&nbsp;Yii&nbsp;&nbsp;(17)</option>
	<option class="level-1" value="2">&nbsp;&nbsp;&nbsp;主机域名&nbsp;&nbsp;(26)</option>
	<option class="level-1" value="66">&nbsp;&nbsp;&nbsp;数据库&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="140">信息安全&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="1">其他类别&nbsp;&nbsp;(184)</option>
	<option class="level-1" value="78">&nbsp;&nbsp;&nbsp;心情&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="15">&nbsp;&nbsp;&nbsp;旧的博文&nbsp;&nbsp;(170)</option>
	<option class="level-0" value="87">操作系统&nbsp;&nbsp;(3)</option>
	<option class="level-1" value="88">&nbsp;&nbsp;&nbsp;Windows&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="81">数学基礎&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="4">日语教程&nbsp;&nbsp;(120)</option>
	<option class="level-1" value="96">&nbsp;&nbsp;&nbsp;口译&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="59">&nbsp;&nbsp;&nbsp;新编日语商务贸易会话&nbsp;&nbsp;(14)</option>
	<option class="level-1" value="19">&nbsp;&nbsp;&nbsp;新编日语阅读文选&nbsp;&nbsp;(34)</option>
	<option class="level-2" value="44">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第一册&nbsp;&nbsp;(20)</option>
	<option class="level-2" value="61">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三册&nbsp;&nbsp;(2)</option>
	<option class="level-2" value="20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第二册&nbsp;&nbsp;(10)</option>
	<option class="level-1" value="46">&nbsp;&nbsp;&nbsp;日语入门&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="62">&nbsp;&nbsp;&nbsp;日语听力&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="5">&nbsp;&nbsp;&nbsp;日语综合教程&nbsp;&nbsp;(64)</option>
	<option class="level-2" value="120">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第七册&nbsp;&nbsp;(14)</option>
	<option class="level-2" value="50">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三册&nbsp;&nbsp;(7)</option>
	<option class="level-2" value="73">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第五册&nbsp;&nbsp;(12)</option>
	<option class="level-2" value="98">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第六册&nbsp;&nbsp;(18)</option>
	<option class="level-2" value="6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第四册&nbsp;&nbsp;(12)</option>
	<option class="level-1" value="86">&nbsp;&nbsp;&nbsp;月の珊瑚&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="131">机器学习&nbsp;&nbsp;(57)</option>
	<option class="level-0" value="16">经济人文&nbsp;&nbsp;(19)</option>
	<option class="level-1" value="17">&nbsp;&nbsp;&nbsp;国际贸易理论与政策&nbsp;&nbsp;(9)</option>
	<option class="level-1" value="30">&nbsp;&nbsp;&nbsp;当代世界经济与政治&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="9">编程开发&nbsp;&nbsp;(556)</option>
	<option class="level-1" value="8">&nbsp;&nbsp;&nbsp;Android&nbsp;&nbsp;(30)</option>
	<option class="level-1" value="13">&nbsp;&nbsp;&nbsp;C++&nbsp;&nbsp;(237)</option>
	<option class="level-1" value="25">&nbsp;&nbsp;&nbsp;Drupal&nbsp;&nbsp;(23)</option>
	<option class="level-1" value="10">&nbsp;&nbsp;&nbsp;Java&nbsp;&nbsp;(69)</option>
	<option class="level-1" value="123">&nbsp;&nbsp;&nbsp;Javascript&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="24">&nbsp;&nbsp;&nbsp;PHP&nbsp;&nbsp;(57)</option>
	<option class="level-1" value="94">&nbsp;&nbsp;&nbsp;Python&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="14">&nbsp;&nbsp;&nbsp;汇编逆向&nbsp;&nbsp;(12)</option>
	<option class="level-1" value="70">&nbsp;&nbsp;&nbsp;算法&nbsp;&nbsp;(235)</option>
	<option class="level-1" value="121">&nbsp;&nbsp;&nbsp;网络&nbsp;&nbsp;(6)</option>
	<option class="level-0" value="104">自然语言处理&nbsp;&nbsp;(90)</option>
	<option class="level-1" value="109">&nbsp;&nbsp;&nbsp;中文分词&nbsp;&nbsp;(10)</option>
	<option class="level-1" value="128">&nbsp;&nbsp;&nbsp;句法分析&nbsp;&nbsp;(6)</option>
	<option class="level-1" value="127">&nbsp;&nbsp;&nbsp;命名实体识别&nbsp;&nbsp;(7)</option>
	<option class="level-1" value="105">&nbsp;&nbsp;&nbsp;语料库&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="12">软件发布&nbsp;&nbsp;(9)</option>
</select>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			location.href = "http://www.hankcs.com/?cat=" + dropdown.options[ dropdown.selectedIndex ].value;
		}
	}
	dropdown.onchange = onCatChange;
})();
/* ]]> */
</script>

</div><div class="widget widget_archive" style="top: 0px;"><h3>文章归档</h3>		<label class="screen-reader-text" for="archives-dropdown-5">文章归档</label>
		<select id="archives-dropdown-5" name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;">
			
			<option value="">选择月份</option>
				<option value="http://www.hankcs.com/2017/07/"> 2017年七月 &nbsp;(14)</option>
	<option value="http://www.hankcs.com/2017/06/"> 2017年六月 &nbsp;(28)</option>
	<option value="http://www.hankcs.com/2017/05/"> 2017年五月 &nbsp;(8)</option>
	<option value="http://www.hankcs.com/2017/03/"> 2017年三月 &nbsp;(12)</option>
	<option value="http://www.hankcs.com/2017/02/"> 2017年二月 &nbsp;(13)</option>
	<option value="http://www.hankcs.com/2017/01/"> 2017年一月 &nbsp;(22)</option>
	<option value="http://www.hankcs.com/2016/12/"> 2016年十二月 &nbsp;(2)</option>
	<option value="http://www.hankcs.com/2016/11/"> 2016年十一月 &nbsp;(15)</option>
	<option value="http://www.hankcs.com/2016/10/"> 2016年十月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2016/09/"> 2016年九月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2016/08/"> 2016年八月 &nbsp;(7)</option>
	<option value="http://www.hankcs.com/2016/07/"> 2016年七月 &nbsp;(1)</option>
	<option value="http://www.hankcs.com/2016/06/"> 2016年六月 &nbsp;(1)</option>
	<option value="http://www.hankcs.com/2016/05/"> 2016年五月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2016/04/"> 2016年四月 &nbsp;(2)</option>
	<option value="http://www.hankcs.com/2016/03/"> 2016年三月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2016/02/"> 2016年二月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2015/12/"> 2015年十二月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2015/11/"> 2015年十一月 &nbsp;(6)</option>
	<option value="http://www.hankcs.com/2015/10/"> 2015年十月 &nbsp;(4)</option>
	<option value="http://www.hankcs.com/2015/09/"> 2015年九月 &nbsp;(4)</option>
	<option value="http://www.hankcs.com/2015/08/"> 2015年八月 &nbsp;(2)</option>
	<option value="http://www.hankcs.com/2015/07/"> 2015年七月 &nbsp;(6)</option>
	<option value="http://www.hankcs.com/2015/05/"> 2015年五月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2015/04/"> 2015年四月 &nbsp;(5)</option>
	<option value="http://www.hankcs.com/2015/03/"> 2015年三月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2015/02/"> 2015年二月 &nbsp;(22)</option>
	<option value="http://www.hankcs.com/2015/01/"> 2015年一月 &nbsp;(14)</option>
	<option value="http://www.hankcs.com/2014/12/"> 2014年十二月 &nbsp;(10)</option>
	<option value="http://www.hankcs.com/2014/11/"> 2014年十一月 &nbsp;(21)</option>
	<option value="http://www.hankcs.com/2014/10/"> 2014年十月 &nbsp;(14)</option>
	<option value="http://www.hankcs.com/2014/09/"> 2014年九月 &nbsp;(16)</option>
	<option value="http://www.hankcs.com/2014/08/"> 2014年八月 &nbsp;(11)</option>
	<option value="http://www.hankcs.com/2014/07/"> 2014年七月 &nbsp;(6)</option>
	<option value="http://www.hankcs.com/2014/06/"> 2014年六月 &nbsp;(13)</option>
	<option value="http://www.hankcs.com/2014/05/"> 2014年五月 &nbsp;(28)</option>
	<option value="http://www.hankcs.com/2014/04/"> 2014年四月 &nbsp;(41)</option>
	<option value="http://www.hankcs.com/2014/03/"> 2014年三月 &nbsp;(26)</option>
	<option value="http://www.hankcs.com/2014/02/"> 2014年二月 &nbsp;(52)</option>
	<option value="http://www.hankcs.com/2014/01/"> 2014年一月 &nbsp;(28)</option>
	<option value="http://www.hankcs.com/2013/12/"> 2013年十二月 &nbsp;(29)</option>
	<option value="http://www.hankcs.com/2013/11/"> 2013年十一月 &nbsp;(21)</option>
	<option value="http://www.hankcs.com/2013/10/"> 2013年十月 &nbsp;(11)</option>
	<option value="http://www.hankcs.com/2013/09/"> 2013年九月 &nbsp;(19)</option>
	<option value="http://www.hankcs.com/2013/08/"> 2013年八月 &nbsp;(22)</option>
	<option value="http://www.hankcs.com/2013/07/"> 2013年七月 &nbsp;(36)</option>
	<option value="http://www.hankcs.com/2013/06/"> 2013年六月 &nbsp;(24)</option>
	<option value="http://www.hankcs.com/2013/05/"> 2013年五月 &nbsp;(36)</option>
	<option value="http://www.hankcs.com/2013/04/"> 2013年四月 &nbsp;(29)</option>
	<option value="http://www.hankcs.com/2013/03/"> 2013年三月 &nbsp;(46)</option>
	<option value="http://www.hankcs.com/2013/02/"> 2013年二月 &nbsp;(5)</option>
	<option value="http://www.hankcs.com/2012/05/"> 2012年五月 &nbsp;(2)</option>
	<option value="http://www.hankcs.com/2012/04/"> 2012年四月 &nbsp;(6)</option>
	<option value="http://www.hankcs.com/2010/12/"> 2010年十二月 &nbsp;(5)</option>
	<option value="http://www.hankcs.com/2010/11/"> 2010年十一月 &nbsp;(10)</option>
	<option value="http://www.hankcs.com/2010/10/"> 2010年十月 &nbsp;(13)</option>
	<option value="http://www.hankcs.com/2010/09/"> 2010年九月 &nbsp;(6)</option>
	<option value="http://www.hankcs.com/2010/08/"> 2010年八月 &nbsp;(5)</option>
	<option value="http://www.hankcs.com/2010/07/"> 2010年七月 &nbsp;(3)</option>
	<option value="http://www.hankcs.com/2010/06/"> 2010年六月 &nbsp;(12)</option>
	<option value="http://www.hankcs.com/2010/05/"> 2010年五月 &nbsp;(14)</option>
	<option value="http://www.hankcs.com/2010/04/"> 2010年四月 &nbsp;(8)</option>
	<option value="http://www.hankcs.com/2010/03/"> 2010年三月 &nbsp;(16)</option>
	<option value="http://www.hankcs.com/2010/01/"> 2010年一月 &nbsp;(16)</option>
	<option value="http://www.hankcs.com/2009/12/"> 2009年十二月 &nbsp;(33)</option>
	<option value="http://www.hankcs.com/2009/11/"> 2009年十一月 &nbsp;(26)</option>
	<option value="http://www.hankcs.com/2009/09/"> 2009年九月 &nbsp;(2)</option>

		</select>
		</div><div class="widget widget_ui_posts"><h3>热门文章</h3><ul>		<li><a target="_blank" href="http://www.hankcs.com/nlp/hanlp.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645jw1eqkariq2ijj20se0sik3a.jpg" class="thumb" alt="HanLP自然语言处理包开源" title="HanLP自然语言处理包开源"></span><span class="text">HanLP自然语言处理包开源</span><span class="muted">2015-03-27</span><span class="muted">评论(260)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/chinese-name-recognition-in-actual-hmm-viterbi-role-labeling.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645jw1emfhkq95r4j20iw0gogqc.jpg" class="thumb" alt="实战HMM-Viterbi角色标注中国人名识别" title="实战HMM-Viterbi角色标注中国人名识别"></span><span class="text">实战HMM-Viterbi角色标注中国人名识别</span><span class="muted">2014-09-11</span><span class="muted">评论(54)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/program/java/%e5%8f%8c%e6%95%b0%e7%bb%84trie%e6%a0%91doublearraytriejava%e5%ae%9e%e7%8e%b0.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645gw1eej8x5w4r6j20m00at75g.jpg" class="thumb" alt="双数组Trie树(DoubleArrayTrie)Java实现" title="双数组Trie树(DoubleArrayTrie)Java实现"></span><span class="text">双数组Trie树(DoubleArrayTrie)Java实现</span><span class="muted">2014-03-18</span><span class="muted">评论(52)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/the-crf-model-format-description.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645jw1en3owz0tqkj20m709cab7.jpg" class="thumb" alt="CRF++模型格式说明" title="CRF++模型格式说明"></span><span class="text">CRF++模型格式说明</span><span class="muted">2014-12-09</span><span class="muted">评论(43)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/part-of-speech-tagging.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645jw1emgd7fyb3ij20k00f074u.jpg" class="thumb" alt="词性标注" title="词性标注"></span><span class="text">词性标注</span><span class="muted">2014-11-19</span><span class="muted">评论(39)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/chinese-sentences-svo-java-extraction.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/6cbb8645gw1ek372ah95cj20eq0rcdgj.jpg" class="thumb" alt="提取中文句子主谓宾的Java实现" title="提取中文句子主谓宾的Java实现"></span><span class="text">提取中文句子主谓宾的Java实现</span><span class="muted">2014-09-07</span><span class="muted">评论(30)</span></a></li>
</ul></div><div class="widget widget_ui_posts" style="top: 0px;"><h3>最新文章</h3><ul>		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-tackling-the-limits-of-dl-for-nlp.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhjhnsrsxwj31bc0omqdk.jpg" class="thumb" alt="CS224n笔记18 挑战深度学习与自然语言处理的极限" title="CS224n笔记18 挑战深度学习与自然语言处理的极限"></span><span class="text">CS224n笔记18 挑战深度学习与自然语言处理的极限</span><span class="muted">2017-07-14</span><span class="muted">评论(0)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-neural-turing-machines.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhjanz14ndj30uk0h6gng.jpg" class="thumb" alt="CS224n研究热点15 Neural Turing Machines" title="CS224n研究热点15 Neural Turing Machines"></span><span class="text">CS224n研究热点15 Neural Turing Machines</span><span class="muted">2017-07-14</span><span class="muted">评论(0)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-nlp-issues-architectures.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhi3ny7njyj30ri0twwm7.jpg" class="thumb" alt="CS224n笔记17 NLP存在的问题与未来的架构" title="CS224n笔记17 NLP存在的问题与未来的架构"></span><span class="text">CS224n笔记17 NLP存在的问题与未来的架构</span><span class="muted">2017-07-13</span><span class="muted">评论(0)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-compose-nn-for-qa.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhicdkacepj318a0v8jv4.jpg" class="thumb" alt="CS224n研究热点14 自动组合神经网络做问答系统" title="CS224n研究热点14 自动组合神经网络做问答系统"></span><span class="text">CS224n研究热点14 自动组合神经网络做问答系统</span><span class="muted">2017-07-13</span><span class="muted">评论(0)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-dmn-question-answering.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhgwvmstwnj313d0fjn4i.jpg" class="thumb" alt="CS224n笔记16 DMN与问答系统" title="CS224n笔记16 DMN与问答系统"></span><span class="text">CS224n笔记16 DMN与问答系统</span><span class="muted">2017-07-12</span><span class="muted">评论(0)</span></a></li>
		<li><a target="_blank" href="http://www.hankcs.com/nlp/cs224n-program-embeddings.html"><span class="thumbnail"><img src="./200行Python代码实现感知机词性标注器_files/006Fmjmcly1fhh4wad4q8j31bm0vagqi.jpg" class="thumb" alt="CS224n研究热点13 学习代码的语义" title="CS224n研究热点13 学习代码的语义"></span><span class="text">CS224n研究热点13 学习代码的语义</span><span class="muted">2017-07-12</span><span class="muted">评论(0)</span></a></li>
</ul></div><div class="widget widget_text"><h3>订阅关注</h3>			<div class="textwidget"><iframe width="100%" height="400" class="share_self" frameborder="0" scrolling="no" src="./200行Python代码实现感知机词性标注器_files/index.html"></iframe></div>
		</div><div class="widget widget_ui_tags" style="top: 0px;"><h3>热门标签</h3><div class="d_tags"><a href="http://www.hankcs.com/tag/%e3%80%8a%e6%8c%91%e6%88%98%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1%e7%ab%9e%e8%b5%9b%e7%ac%ac2%e7%89%88%e3%80%8b/">《挑战程序设计竞赛(第2版)》 (184)</a><a href="http://www.hankcs.com/tag/%e3%80%8a%e6%97%a5%e8%af%ad%e7%bb%bc%e5%90%88%e6%95%99%e7%a8%8b%e3%80%8b/">《日语综合教程》 (57)</a><a href="http://www.hankcs.com/tag/cs224n/">CS224n (36)</a><a href="http://www.hankcs.com/tag/%e3%80%8a%e6%96%b0%e7%bc%96%e6%97%a5%e8%af%ad%e9%98%85%e8%af%bb%e6%96%87%e9%80%89%e3%80%8b/">《新编日语阅读文选》 (34)</a><a href="http://www.hankcs.com/tag/%e3%80%8a%e6%99%ba%e8%83%bdweb%e7%ae%97%e6%b3%95%e3%80%8b/">《智能Web算法》 (20)</a><a href="http://www.hankcs.com/tag/neural-networks-for-machine-learning/">Neural Networks for Machine Learning (19)</a><a href="http://www.hankcs.com/tag/%e4%b8%ad%e6%96%87%e5%88%86%e8%af%8d/">中文分词 (18)</a><a href="http://www.hankcs.com/tag/wordpress/">WordPress (17)</a><a href="http://www.hankcs.com/tag/%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0/">深度学习 (16)</a><a href="http://www.hankcs.com/tag/lucene/">Lucene (15)</a><a href="http://www.hankcs.com/tag/%e7%bb%b4%e7%89%b9%e6%af%94%e7%ae%97%e6%b3%95/">维特比算法 (15)</a><a href="http://www.hankcs.com/tag/%e6%96%b0%e7%bc%96%e6%97%a5%e8%af%ad%e5%95%86%e5%8a%a1%e8%b4%b8%e6%98%93%e4%bc%9a%e8%af%9d/">新编日语商务贸易会话 (14)</a><a href="http://www.hankcs.com/tag/intellij-idea/">IntelliJ IDEA (13)</a><a href="http://www.hankcs.com/tag/%e3%80%8a%e7%bb%9f%e8%ae%a1%e5%ad%a6%e4%b9%a0%e6%96%b9%e6%b3%95%e3%80%8b/">《统计学习方法》 (12)</a><a href="http://www.hankcs.com/tag/uva/">UVa (11)</a><a href="http://www.hankcs.com/tag/drupal7%e4%b8%93%e4%b8%9a%e5%bc%80%e5%8f%91%e6%8c%87%e5%8d%97-%e7%ac%ac%e4%b8%89%e7%89%88/">Drupal7专业开发指南 第三版 (10)</a><a href="http://www.hankcs.com/tag/%e3%80%8a%e6%8c%91%e6%88%98%e7%bc%96%e7%a8%8b-%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1%e7%ab%9e%e8%b5%9b%e8%ae%ad%e7%bb%83%e6%89%8b%e5%86%8c%e3%80%8b/">《挑战编程-程序设计竞赛训练手册》 (10)</a><a href="http://www.hankcs.com/tag/hmm/">HMM (10)</a><a href="http://www.hankcs.com/tag/matlab/">matlab (9)</a><a href="http://www.hankcs.com/tag/tensorflow/">TensorFlow (9)</a><a href="http://www.hankcs.com/tag/cs229/">CS229 (8)</a><a href="http://www.hankcs.com/tag/word2vec/">word2vec (8)</a><a href="http://www.hankcs.com/tag/google-code-jam/">Google code jam (7)</a><a href="http://www.hankcs.com/tag/%e3%80%8ac%e6%a0%87%e5%87%86%e7%a8%8b%e5%ba%8f%e5%ba%93-%e8%87%aa%e4%bf%ae%e6%95%99%e7%a8%8b%e4%b8%8e%e5%8f%82%e8%80%83%e6%89%8b%e5%86%8c%e3%80%8b/">《C++标准程序库—自修教程与参考手册》 (7)</a><a href="http://www.hankcs.com/tag/crf/">CRF (7)</a><a href="http://www.hankcs.com/tag/yii/">Yii (6)</a><a href="http://www.hankcs.com/tag/cnn/">CNN (6)</a><a href="http://www.hankcs.com/tag/webrtc/">WebRTC (5)</a><a href="http://www.hankcs.com/tag/cocos2d-x/">Cocos2d-x (5)</a><a href="http://www.hankcs.com/tag/rnn/">RNN (5)</a></div></div></aside></section>

<div class="branding branding-black">
	<div class="container">
		<h2>我的开源项目</h2>
		<a target="blank" class="btn btn-lg" href="https://github.com/hankcs/HanLP">HanLP自然语言处理包</a><a target="blank" class="btn btn-lg" href="https://github.com/hankcs/AhoCorasickDoubleArrayTrie">基于DoubleArrayTrie的Aho Corasick自动机</a>	</div>
</div>
<footer class="footer">
	<div class="container">
		<div class="fcode">
					</div>
		<p>© 2017 <a href="http://www.hankcs.com/">码农场</a> &nbsp; <a href="http://www.hankcs.com/sitemap.xml">网站地图</a> &nbsp; <a href="http://www.miitbeian.gov.cn/" target="_blank">沪ICP备14002007号-1</a></p>
		<div style="display:none">
<script language="javascript" type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/trace.js.下载"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47205472-1', 'auto');
  ga('send', 'pageview');

</script>
<script language="javascript" type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/15590612.js.下载"></script><a href="http://www.51.la/?15590612" target="_blank" title="51.La 网站流量统计系统"><img alt="51.La 网站流量统计系统" src="./200行Python代码实现感知机词性标注器_files/icon_2.gif" style="border:none"></a>

<noscript>&lt;a href="//www.51.la/?15590612" target="_blank"&gt;&lt;img alt="&amp;#x6211;&amp;#x8981;&amp;#x5566;&amp;#x514D;&amp;#x8D39;&amp;#x7EDF;&amp;#x8BA1;" src="//img.users.51.la/15590612.asp" style="border:none" /&gt;&lt;/a&gt;</noscript>
</div>	</div>
</footer>

<script>
window.jsui={
    www: 'http://www.hankcs.com',
    uri: 'http://www.hankcs.com/wp-content/themes/dux',
    ver: '1.3',
	roll: ["1","2","6","4"],
    ajaxpager: '500',
    url_rp: 'http://www.hankcs.com/about/'
};
</script>
<script type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/bootstrap.min.js.下载"></script>
<script type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/loader.js.下载"></script>
<script type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/wp-embed.min.js.下载"></script>
<script type="text/javascript" src="./200行Python代码实现感知机词性标注器_files/form.js.下载"></script>

    <div class="m-mask"></div>    <div class="rollbar" style="display: none;"><ul><li><a href="javascript:(scrollTo());"><i class="fa fa-angle-up"></i></a><h6>去顶部<i></i></h6></li><li><a href="javascript:(on_click_toc_button());"><i class="fa fa-list post_open_icon"></i></a><h6 id="toc_label">打开目录<i></i></h6></li><li><a href="javascript:(scrollTo(&#39;#comments&#39;,-15));"><i class="fa fa-comments"></i></a><h6>去评论<i></i></h6></li></ul></div><ul class="m-navbar">
			<li id="menu-item-1834" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1834"><a href="http://www.hankcs.com/program/cpp/">C++</a></li>
<li id="menu-item-1835" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1835"><a href="http://www.hankcs.com/program/java/">Java</a></li>
<li id="menu-item-5754" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5754"><a href="http://www.hankcs.com/ml/">机器学习</a></li>
<li id="menu-item-2954" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-2954"><a href="http://www.hankcs.com/nlp/">NLP</a>
<ul class="sub-menu">
	<li id="menu-item-4344" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4344"><a href="http://www.hankcs.com/nlp/corpus/">语料库</a></li>
	<li id="menu-item-4342" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4342"><a href="http://www.hankcs.com/nlp/segment/">中文分词</a></li>
	<li id="menu-item-4343" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4343"><a href="http://www.hankcs.com/nlp/ner/">命名实体识别</a></li>
	<li id="menu-item-4479" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4479"><a href="http://www.hankcs.com/nlp/parsing/">句法分析</a></li>
</ul>
</li>
<li id="menu-item-1837" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1837"><a href="http://www.hankcs.com/program/algorithm/">算法</a></li>
<li id="menu-item-1839" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1839"><a href="http://www.hankcs.com/software/">软件</a></li>
<li id="menu-item-1838" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1838"><a href="http://www.hankcs.com/nihongonote/">日语</a>
<ul class="sub-menu">
	<li id="menu-item-1860" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1860"><a href="http://www.hankcs.com/nihongonote/riyurimen/">日语入门</a></li>
	<li id="menu-item-1861" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1861"><a href="http://www.hankcs.com/nihongonote/listening/">日语听力</a></li>
	<li id="menu-item-1863" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1863"><a href="http://www.hankcs.com/nihongonote/tekusuto/">日语综合教程</a>
	<ul class="sub-menu">
		<li id="menu-item-2190" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2190"><a href="http://www.hankcs.com/nihongonote/tekusuto/disance/">第三册</a></li>
		<li id="menu-item-2192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2192"><a href="http://www.hankcs.com/nihongonote/tekusuto/daiyonnsatu/">第四册</a></li>
		<li id="menu-item-2191" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2191"><a href="http://www.hankcs.com/nihongonote/tekusuto/5/">第五册</a></li>
		<li id="menu-item-2702" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2702"><a href="http://www.hankcs.com/nihongonote/tekusuto/%e7%ac%ac%e5%85%ad%e5%86%8c/">第六册</a></li>
		<li id="menu-item-3604" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3604"><a href="http://www.hankcs.com/nihongonote/tekusuto/%e7%ac%ac%e4%b8%83%e5%86%8c/">第七册</a></li>
	</ul>
</li>
	<li id="menu-item-1859" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1859"><a href="http://www.hankcs.com/nihongonote/fd2/">新编日语阅读文选</a>
	<ul class="sub-menu">
		<li id="menu-item-2187" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2187"><a href="http://www.hankcs.com/nihongonote/fd2/c1/">第一册</a></li>
		<li id="menu-item-2189" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2189"><a href="http://www.hankcs.com/nihongonote/fd2/c2/">第二册</a></li>
		<li id="menu-item-2188" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2188"><a href="http://www.hankcs.com/nihongonote/fd2/c3/">第三册</a></li>
	</ul>
</li>
	<li id="menu-item-1858" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1858"><a href="http://www.hankcs.com/nihongonote/jpkaiwa/">日语商务贸易会话</a></li>
</ul>
</li>
<li id="menu-item-1843" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1843"><a href="http://www.hankcs.com/about/">关于</a></li>
							<li class="navto-search"><a href="javascript:;" class="search-show active"><i class="fa fa-search"></i></a></li>
					</ul>			<div class="sign">			    <div class="sign-mask"></div>			    <div class="container">			        <a href="http://www.hankcs.com/nlp/averaged-perceptron-tagger.html#" class="close-link signclose-loader"><i class="fa fa-close"></i></a>			        <div class="sign-tips"></div>			        <form id="sign-in">  			            <h3><small class="signup-loader">切换注册</small>登录</h3>			            <h6>			                <label for="inputEmail">用户名或邮箱</label>			                <input type="text" name="username" class="form-control" id="inputEmail" placeholder="用户名或邮箱">			            </h6>			            <h6>			                <label for="inputPassword">密码</label>			                <input type="password" name="password" class="form-control" id="inputPassword" placeholder="登录密码">			            </h6>			            <div class="sign-submit">			                <input type="button" class="btn btn-primary signsubmit-loader" name="submit" value="登录">  			                <input type="hidden" name="action" value="signin">			                <label><input type="checkbox" checked="checked" name="remember" value="forever">记住我</label>			            </div><div class="sign-info"><a href="http://www.hankcs.com/about/">找回密码？</a></div></form>			        <form id="sign-up"> 			            <h3><small class="signin-loader">切换登录</small>注册</h3>			            <h6>			                <label for="inputName">昵称</label>			                <input type="text" name="name" class="form-control" id="inputName" placeholder="设置昵称">			            </h6>			            <h6>			                <label for="inputEmail">邮箱</label>			                <input type="email" name="email" class="form-control" id="inputEmail" placeholder="邮箱">			            </h6>			            <div class="sign-submit">			                <input type="button" class="btn btn-primary btn-block signsubmit-loader" name="submit" value="快速注册">  			                <input type="hidden" name="action" value="signup">  			            </div>			        </form>			    </div>			</div>		</body></html>